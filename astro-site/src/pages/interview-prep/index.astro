---
import MainLayout from '../../layouts/MainLayout.astro';
import Navbar from '../../components/Navbar.astro';
import { getMarkdownFiles } from '../../utils/getMarkdownFiles';
import path from 'path';

// Get base directory
const getBaseDir = () => {
  const currentFileUrl = import.meta.url;
  const currentFilePath = new URL(currentFileUrl).pathname;
  const astroSiteDir = path.dirname(currentFilePath).replace('/src/pages/interview-prep', '');
  return path.join(astroSiteDir, '..');
};

const basePath = path.join(getBaseDir(), 'interview-prep');
const files = getMarkdownFiles(basePath);

const quickRef = files.filter(f => f.slug.includes('quick-reference'));
const detailed = files.filter(f => f.slug.includes('detailed-questions'));
---

<MainLayout title="Interview Preparation">
  <Navbar />
  
  <main class="min-h-screen py-12 px-4">
    <div class="max-w-6xl mx-auto">
      <h1 class="text-4xl font-bold mb-8 text-center">üìö Interview Preparation</h1>
      
      <!-- Bilingual Questions Banner -->
      <a href="/interview-prep/bilingual-questions" class="block mb-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl shadow-lg p-6 text-white hover:shadow-xl transition-shadow">
        <div class="flex items-center justify-between">
          <div>
            <h2 class="text-2xl font-bold mb-2">üåç Bilingual Interview Questions (NEW)</h2>
            <p class="opacity-90">350+ c√¢u h·ªèi song ng·ªØ EN/VI cho HTML, CSS, JS, TS, React, Next.js + Self Introduction</p>
          </div>
          <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </div>
      </a>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Quick Reference -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
          <h2 class="text-2xl font-bold mb-4">‚ö° Quick Reference</h2>
          <p class="text-gray-600 dark:text-gray-400 mb-4">
            T√≥m t·∫Øt nhanh cho ph·ªèng v·∫•n ng√†y mai
          </p>
          <ul class="space-y-2">
            {quickRef.map((file) => (
              <li>
                <a
                  href={`/interview-prep/${file.slug}`}
                  class="block p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 touch-target"
                >
                  {file.title}
                </a>
              </li>
            ))}
          </ul>
        </div>
        
        <!-- Detailed Questions -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
          <h2 class="text-2xl font-bold mb-4">üìñ Detailed Questions</h2>
          <p class="text-gray-600 dark:text-gray-400 mb-4">
            C√¢u h·ªèi chi ti·∫øt v·ªõi diagrams
          </p>
          <ul class="space-y-2">
            {detailed.slice(0, 5).map((file) => (
              <li>
                <a
                  href={`/interview-prep/${file.slug}`}
                  class="block p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 touch-target"
                >
                  {file.title}
                </a>
              </li>
            ))}
            <li>
              <a
                href="/interview-prep/detailed-questions"
                class="block p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 touch-target text-blue-600 dark:text-blue-400 font-medium"
              >
                Xem t·∫•t c·∫£ ‚Üí
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </main>
</MainLayout>

